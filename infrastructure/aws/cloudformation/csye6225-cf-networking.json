{
   "AWSTemplateFormatVersion":"2010-09-09",
   "Description":"",
   "Parameters":{
      "stackname":{
         "Description":"name of network stack",
         "Default":"stack1-csye6225-vpc",
         "Type":"String"
      },
      "vpcblock":{
         "Description":"VPC ID Block",
         "Default":"10.0.0.0/16",
         "Type":"String"
      },
      "zone1":{
         "Description":"Zone 1a for subnet 1",
         "Default":"us-east-1a",
         "Type":"String"
      },
      "zone2":{
         "Description":"Zone 1a for subnet 1",
         "Default":"us-east-1b",
         "Type":"String"
      },
      "zone3":{
         "Description":"Zone 1a for subnet 1",
         "Default":"us-east-1c",
         "Type":"String"
      },
      "subnetip1":{
         "Description":"cidr for subnet 1",
	 "Default":"10.0.1.0/24",
         "Type":"String"
      },
      "subnetip2":{
         "Description":"cidr for subnet 2",
	 "Default":"10.0.2.0/24",
         "Type":"String"
      },
      "subnetip3":{
         "Description":"cidr for subnet 3",
         "Default":"10.0.3.0/24",
         "Type":"String"
      }
   },
   "Resources":{
      "myVPC":{
         "Type":"AWS::EC2::VPC",
         "Properties":{
            "CidrBlock":{
               "Ref":"vpcblock"
            },
	   "EnableDnsSupport" : true,
           "EnableDnsHostnames" : true
         }
      },
      "subnet1":{
         "Type":"AWS::EC2::Subnet",
         "Properties":{
            "AvailabilityZone":{
               "Ref":"zone1"
            },
            "MapPublicIpOnLaunch":true,
            "VpcId":{
               "Ref":"myVPC"
            },
            "CidrBlock":{
               "Ref":"subnetip1"
            }
         }
      },
      "subnet2":{
         "Type":"AWS::EC2::Subnet",
         "Properties":{
            "AvailabilityZone":{
               "Ref":"zone2"
            },
            "VpcId":{
               "Ref":"myVPC"
            },
            "CidrBlock":{
               "Ref":"subnetip2"
            },
            "MapPublicIpOnLaunch":true
         }
      },
      "subnet3":{
         "Type":"AWS::EC2::Subnet",
         "Properties":{
            "AvailabilityZone":{
               "Ref":"zone3"
            },
            "VpcId":{
               "Ref":"myVPC"
            },
            "MapPublicIpOnLaunch":true,
            "CidrBlock":{
               "Ref":"subnetip3"
            }
         }
      },
      "myRouteTable":{
         "Type":"AWS::EC2::RouteTable",
         "Properties":{
            "VpcId":{
               "Ref":"myVPC"
            }
         }
      },
      "myInternetGateway":{
         "Type":"AWS::EC2::InternetGateway",
         "Properties":{
            "Tags":[
                 {"Key" : "gateway1", "Value" : "csye"}
            ]
         }
      },
      "AttachGateway":{
         "Type":"AWS::EC2::VPCGatewayAttachment",
         "Properties":{
            "VpcId":{
               "Ref":"myVPC"
            },
            "InternetGatewayId":{
               "Ref":"myInternetGateway"
            }
         }
      },
      "IGRouteTableRoute":{
         "Type":"AWS::EC2::Route",
         "Properties":{
            "RouteTableId":{
               "Ref":"myRouteTable"
            },
            "DestinationCidrBlock":"0.0.0.0/0",
            "GatewayId":{
               "Ref":"myInternetGateway"
            }
         }
      },
      "SubnetRouteTableAssociation1":{
         "Type":"AWS::EC2::SubnetRouteTableAssociation",
         "Properties":{
            "SubnetId":{
               "Ref":"subnet1"
            },
            "RouteTableId":{
               "Ref":"myRouteTable"
            }
         }
      },
       "SubnetRouteTableAssociation2":{
         "Type":"AWS::EC2::SubnetRouteTableAssociation",
         "Properties":{
            "SubnetId":{
               "Ref":"subnet2"
            },
            "RouteTableId":{
               "Ref":"myRouteTable"
            }
         }
      },
       "SubnetRouteTableAssociation3":{
         "Type":"AWS::EC2::SubnetRouteTableAssociation",
         "Properties":{
            "SubnetId":{
               "Ref":"subnet3"
            },
            "RouteTableId":{
               "Ref":"myRouteTable"
            }
         }
      }
   },
   "Outputs":{

   }
}
